!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=document.querySelector(".profile__edit-button"),o=document.querySelector(".profile__avatar-edit-button"),i=document.querySelector(".profile__name"),u=document.querySelector(".profile__job"),c=document.querySelector(".profile__avatar"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".gallery"),s=document.querySelector(".popup_type_view"),f=document.querySelector(".popup_type_edit"),p=document.querySelector(".popup_type_add"),h=document.querySelector(".popup__forms_type_edit"),_=document.querySelector(".popup__forms_type_add"),y=document.querySelector(".popup__forms_type_avatar"),d=document.querySelector(".popup_type_avatar"),m=document.querySelector(".popup_type_delete"),v={formSelector:".popup__forms",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n,r,o,i,u,c,a,l,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=n,this._title=r,this._templateSelector=o,this._handleCardClick=i,this._deleteCardClick=u,this._likes=a,this._id=t,this._isOwn=l,this._likeCardClick=c,this._hasBeenLiked=s}var t,n,r;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__card").cloneNode(!0)}},{key:"generateTemplate",value:function(){this._element=this._getTemplate(),this._setEventListeners(),this._imageElement=this._element.querySelector(".gallery__photo"),this._likesNumber=this._element.querySelector(".gallery__like-number"),this._element.querySelector(".gallery__trash-button").style.display=this._isOwn?"block":"none",this._imageElement.src=this._image,this._imageElement.alt=this._title,this._element.querySelector(".gallery__photo-title").textContent=this._title,this._likesNumber.textContent=this._likes.length;var e=this._element.querySelector(".gallery__like-button");return this._hasBeenLiked&&e.classList.add("gallery__like-button_active"),this._element}},{key:"handleLikeButton",value:function(){this._element.querySelector(".gallery__like-button").classList.toggle("gallery__like-button_active")}},{key:"_likeButtonClick",value:function(){this._likeCardClick(this)}},{key:"setLikes",value:function(e){this._likes=e,this._likesNumber.textContent=this._likes.length}},{key:"trashSubmit",value:function(){this._element.remove(),this._element=null}},{key:"_handlePopupViewOpen",value:function(){this._handleCardClick()}},{key:"_handlePopupDeleteOpen",value:function(){this._deleteCardClick(this)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".gallery__like-button").addEventListener("click",this._likeButtonClick.bind(this)),this._element.querySelector(".gallery__trash-button").addEventListener("click",this._handlePopupDeleteOpen.bind(this)),this._element.querySelector(".gallery__photo").addEventListener("click",(function(){e._handlePopupViewOpen()}))}}])&&b(t.prototype,n),r&&b(t,r),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=n}var t,n,r;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e.addItem(t)}))}},{key:"addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._renderer(e);t?this._container.append(n):this._container.prepend(n)}}])&&S(t.prototype,n),r&&S(t,r),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._submitButton=this._popupSelector.querySelector(".popup__submit-button"),this.setEventListeners(),this._handleEscClose=this._handleEscClose.bind(this)}var t,n,r;return t=e,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_opened"),document.activeElement.blur(),this._setEscListener()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_setEscListener",value:function(){document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){null!==document.querySelector(".popup_opened")&&"Escape"===e.code&&this.close()}},{key:"_handleOverlayClose",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.querySelector(".popup__close-button").addEventListener("click",(function(t){e.close(t)})),this._popupSelector.addEventListener("click",(function(t){e._handleOverlayClose(t)}))}},{key:"setLoading",value:function(){this._submitButton.textContent="Сохранение...",this._submitButton.disabled=!0}},{key:"setDefaultButton",value:function(e){this._submitButton.disabled=!1,this._submitButton.textContent=e}}])&&E(t.prototype,n),r&&E(t,r),e}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,e);var t,n,r,o=P(i);function i(e,t,n,r,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(c=o.call(this,e))._formSubmitPromise=t,c._formSubmitCallback=n,c._popupValidator=r,c._title=u,c}return t=i,(n=[{key:"_getInputValues",value:function(){var e={};return Array.from(this._popupSelector.querySelectorAll(".popup__input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;j(q(i.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e.setLoading(),e._formSubmitPromise(e._getInputValues()).then((function(t){e.setDefaultButton(e._title),e._formSubmitCallback(t)})).catch((function(e){console.log(e)})),e.close()}))}},{key:"open",value:function(e,t){for(var n in e)null!==this._popupSelector.querySelector(".popup__input[name=".concat(t,"-").concat(n,"]"))&&(this._popupSelector.querySelector(".popup__input[name=".concat(t,"-").concat(n,"]")).value=e[n]);j(q(i.prototype),"open",this).call(this),this._popupValidator.enableValidation(),this._popupValidator.toggleButtonState(!0)}},{key:"close",value:function(){Array.from(this._popupSelector.querySelectorAll(".popup__input")).forEach((function(e){e.value=""})),j(q(i.prototype),"close",this).call(this),this._popupValidator.resetError()}}])&&C(t.prototype,n),r&&C(t,r),i}(w);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(i,e);var t,n,r,o=A(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(n=[{key:"open",value:function(e,t){this._popupSelector.querySelector(".popup__photo").src=t,this._popupSelector.querySelector(".popup__photo-caption").textContent=e,x(V(i.prototype),"open",this).call(this)}}])&&R(t.prototype,n),r&&R(t,r),i}(w);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=t,this._jobSelector=n,this._avatarSelector=r}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameSelector.textContent,job:this._jobSelector.textContent,id:this._id}}},{key:"setUserInfo",value:function(e){this._nameSelector.textContent=e.name,this._jobSelector.textContent=e.about,this._avatarSelector.style.backgroundImage="url(".concat(e.avatar,")"),this._id=e._id}}])&&N(t.prototype,n),r&&N(t,r),e}();function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(t,n,r){var o=r.formSelector,i=r.inputSelector,u=r.submitButtonSelector,c=r.inactiveButtonClass,a=r.inputErrorClass,l=r.errorClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=o,this._inputSelector=i,this._submitButtonSelector=u,this._inactiveButtonClass=c,this._inputErrorClass=a,this._errorClass=l,this._formElement=t,this._inputElements=this._formElement.querySelectorAll(this._inputSelector),this._popup=n}var t,n,r;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error")),n=e.validationMessage;e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=n}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(){var e=this;this._inputElements.forEach((function(t){t.validity.valid?e._hideInputError(t):e._showInputError(t)}))}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(this._hasInvalidInput()),this._inputElements.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(),e.toggleButtonState(e._hasInvalidInput())}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputElements).some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(e){var t=this._formElement.querySelector(this._submitButtonSelector);if(e){if(null===t)return;t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)}else t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled",!0)}},{key:"resetError",value:function(){if(!this._popup.classList.contains("popup_opened")){var e=this._popup.querySelectorAll(".popup__input-error_active"),t=this._popup.querySelectorAll(".popup__input_type_error");if(null===e&&null===t)return;e.forEach((function(e){e.classList.remove("popup__input-error_active")})),t.forEach((function(e){e.classList.remove("popup__input_type_error")}))}}}])&&J(t.prototype,n),r&&J(t,r),e}();function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){var n=t.url,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=n,this._headers=r}var t,n,r;return t=e,(n=[{key:"getItems",value:function(){return fetch(this._url,{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"createItem",value:function(e){return fetch(this._url,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"changeItem",value:function(e){return fetch(this._url,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteItem",value:function(e){return fetch("".concat(this._url).concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"putItem",value:function(e){return fetch("".concat(this._url).concat(e._id),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&$(t.prototype,n),r&&$(t,r),e}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(i,e);var t,n,r,o=X(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(n=[{key:"setSubmitAction",value:function(e){this._formSubmitCallback=e}},{key:"setEventListeners",value:function(){var e=this;Q(Z(i.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmitCallback(),e.close()}))}},{key:"setDefaultButton",value:function(){Q(Z(i.prototype),"setDefaultButton",this).call(this),this._submitButton=this._popupSelector.querySelector(".popup__submit-button"),this._submitButton.textContent="Да"}}])&&K(t.prototype,n),r&&K(t,r),i}(w);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=new z(i,u,c),oe=new F({url:"https://mesto.nomoreparties.co/v1/cohort-14/users/me",headers:{authorization:"3264da94-6a0d-46bd-9eaf-c8758f7396fd","Content-Type":"application/json"}}),ie=new F({url:"https://mesto.nomoreparties.co/v1/cohort-14/users/me/avatar",headers:{authorization:"3264da94-6a0d-46bd-9eaf-c8758f7396fd","Content-Type":"application/json"}}),ue=new F({url:"https://mesto.nomoreparties.co/v1/cohort-14/cards",headers:{authorization:"3264da94-6a0d-46bd-9eaf-c8758f7396fd","Content-Type":"application/json"}}),ce=new F({url:"https://mesto.nomoreparties.co/v1/cohort-14/cards/",headers:{authorization:"3264da94-6a0d-46bd-9eaf-c8758f7396fd","Content-Type":"application/json"}}),ae=new F({url:"https://mesto.nomoreparties.co/v1/cohort-14/cards/likes/",headers:{authorization:"3264da94-6a0d-46bd-9eaf-c8758f7396fd","Content-Type":"application/json"}});Promise.all([oe.getItems(),ue.getItems()]).then((function(e){var t=te(e,2),n=t[0],r=t[1];re.setUserInfo(n),r.forEach((function(e){he.addItem({_id:e._id,link:e.link,name:e.name,likes:e.likes,isOwn:e.owner._id===n._id,hasBeenLiked:e.likes.some((function(e){return e._id==re.getUserInfo().id}))},!0)}))})).catch((function(e){console.log(e)}));var le=new H(h,f,v),se=new H(_,p,v),fe=new H(y,d,v),pe=new ee(m),he=new g({items:[],renderer:function(e){return new k(e._id,e.link,e.name,".card-template",(function(){new M(s).open(e.name,e.link)}),(function(e){pe.setSubmitAction((function(){pe.setLoading(),ce.deleteItem(e._id).then((function(t){e.trashSubmit(),pe.setDefaultButton()})).catch((function(e){console.log(e)}))})),pe.open()}),(function(e){e._likes.some((function(e){return e._id==re.getUserInfo().id}))?ae.deleteItem(e._id).then((function(t){e.setLikes(t.likes),e.handleLikeButton()})).catch((function(e){console.log(e)})):ae.putItem(e).then((function(t){e.setLikes(t.likes),e.handleLikeButton()})).catch((function(e){console.log(e)}))}),e.likes,e.isOwn,e.hasBeenLiked).generateTemplate()}},l),_e=new B(f,(function(e){var t={name:e["user-name"],about:e["user-job"]};return oe.changeItem(t)}),(function(e){re.setUserInfo(e)}),le,"Сохранить"),ye=new B(p,(function(e){var t={name:e["place-name"],link:e["place-url"]};return ue.createItem(t)}),(function(e){he.addItem({_id:e._id,name:e.name,link:e.link,likes:e.likes,isOwn:e.owner._id===re.getUserInfo().id,hasBeenLiked:e.likes.some((function(e){return e._id==re.getUserInfo().id}))})}),se,"Создать"),de=new B(d,(function(e){var t={avatar:e["user-avatar"]};return ie.changeItem(t)}),(function(e){re.setUserInfo(e)}),fe,"Сохранить");r.addEventListener("click",(function(){_e.open(re.getUserInfo(),"user")})),a.addEventListener("click",(function(){ye.open()})),o.addEventListener("click",(function(){de.open()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicHJvZmlsZUF2YXRhciIsInByb2ZpbGVBZGRCdXR0b24iLCJjYXJkc0NvbnRhaW5lciIsInBvcHVwVmlldyIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBGb3Jtc0VkaXQiLCJwb3B1cEZvcm1zQWRkIiwicG9wdXBGb3Jtc0F2YXRhciIsInBvcHVwQXZhdGFyIiwicG9wdXBEZWxldGUiLCJmb3JtU2VsZWN0b3JzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiaWQiLCJpbWFnZSIsInRpdGxlIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImRlbGV0ZUNhcmRDbGljayIsImxpa2VDYXJkQ2xpY2siLCJsaWtlcyIsImlzT3duIiwiaGFzQmVlbkxpa2VkIiwidGhpcyIsIl9pbWFnZSIsIl90aXRsZSIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVDYXJkQ2xpY2siLCJfbGlrZXMiLCJfaWQiLCJfaXNPd24iLCJfbGlrZUNhcmRDbGljayIsIl9oYXNCZWVuTGlrZWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW1hZ2VFbGVtZW50IiwiX2xpa2VzTnVtYmVyIiwic3R5bGUiLCJkaXNwbGF5Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJsaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwidG9nZ2xlIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQnV0dG9uQ2xpY2siLCJfaGFuZGxlUG9wdXBEZWxldGVPcGVuIiwiX2hhbmRsZVBvcHVwVmlld09wZW4iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImZvckVhY2giLCJpdGVtIiwiYWRkSXRlbSIsImFwcGVuZCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJhY3RpdmVFbGVtZW50IiwiYmx1ciIsIl9zZXRFc2NMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjb2RlIiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsImRpc2FibGVkIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRQcm9taXNlIiwiZm9ybVN1Ym1pdENhbGxiYWNrIiwicG9wdXBWYWxpZGF0b3IiLCJfZm9ybVN1Ym1pdFByb21pc2UiLCJfZm9ybVN1Ym1pdENhbGxiYWNrIiwiX3BvcHVwVmFsaWRhdG9yIiwidmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0IiwicHJldmVudERlZmF1bHQiLCJzZXRMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwidGhlbiIsInJlcyIsInNldERlZmF1bHRCdXR0b24iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmb3JtRGF0YSIsInByZWZpeCIsImlucHV0TmFtZSIsImVuYWJsZVZhbGlkYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInJlc2V0RXJyb3IiLCJQb3B1cFdpdGhJbWFnZSIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJfYXZhdGFyU2VsZWN0b3IiLCJqb2IiLCJuZXdVc2VySW5mbyIsImFib3V0IiwiYmFja2dyb3VuZEltYWdlIiwiYXZhdGFyIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwicG9wdXAiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVsZW1lbnRzIiwiX3BvcHVwIiwiZXJyb3JFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJzb21lIiwiY29uZGl0aW9uIiwiYnV0dG9uRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImNvbnRhaW5zIiwiZXJyb3JNZXNzYWdlcyIsImlucHV0RXJyb3JzIiwiaW5wdXRFcnJvciIsIkFwaSIsInVybCIsImhlYWRlcnMiLCJfdXJsIiwiX2hlYWRlcnMiLCJmZXRjaCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIlBvcHVwV2l0aFN1Ym1pdCIsImFjdGlvbiIsInVzZXJJbmZvIiwidXNlckFwaSIsImF1dGhvcml6YXRpb24iLCJ1c2VyQXZhdGFyQXBpIiwiY2FyZHNBcGkiLCJkZWxldGVDYXJkQXBpIiwibGlrZUFwaSIsImFsbCIsImdldEl0ZW1zIiwidXNlciIsImNhcmRzIiwic2V0VXNlckluZm8iLCJjYXJkIiwiY2FyZExpc3QiLCJsaW5rIiwib3duZXIiLCJnZXRVc2VySW5mbyIsInBvcHVwRWRpdFZhbGlkYXRvciIsInBvcHVwQWRkVmFsaWRhdG9yIiwicG9wdXBBdmF0YXJWYWxpZGF0b3IiLCJwb3B1cFdpdGhTdWJtaXREZWxldGUiLCJvcGVuIiwiY2FyZFRvQmVEZWxldGVkIiwic2V0U3VibWl0QWN0aW9uIiwiZGVsZXRlSXRlbSIsInRyYXNoU3VibWl0IiwiY2FyZFRvQmVMaWtlZCIsInNldExpa2VzIiwiaGFuZGxlTGlrZUJ1dHRvbiIsInB1dEl0ZW0iLCJnZW5lcmF0ZVRlbXBsYXRlIiwicG9wdXBXaXRoRm9ybUVkaXQiLCJmb3JtSW5mbyIsImNoYW5nZUl0ZW0iLCJwb3B1cFdpdGhGb3JtQWRkIiwiY3JlYXRlSXRlbSIsInBvcHVwV2l0aEZvcm1BdmF0YXIiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQ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UyxnQkFFckIsT0FBTzdCLEdBQWM4QixXQUFXL0ksTUFFcEMsU0FBQ3NDLEdBQ0d3RSxHQUFTVyxZQUFZbkYsS0FFekIyRixHQUNBLGFBR0o3TSxFQUFrQmdFLGlCQUFpQixTQUFTLFdBQ3hDeUosR0FBa0JWLEtBQUtyQixHQUFTZ0IsY0FBZSxXQUduRG5NLEVBQWlCeUQsaUJBQWlCLFNBQVMsV0FDdkM0SixHQUFpQmIsVUFHckI1TSxFQUFvQjZELGlCQUFpQixTQUFTLFdBQzFDOEosR0FBb0JmIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fam9iJyk7XHJcbmNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XHJcbmNvbnN0IHBvcHVwVmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3ZpZXcnKTtcclxuY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpO1xyXG5jb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZCcpO1xyXG5jb25zdCBwb3B1cEZvcm1zRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybXNfdHlwZV9lZGl0Jyk7XHJcbmNvbnN0IHBvcHVwRm9ybXNBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1zX3R5cGVfYWRkJyk7XHJcbmNvbnN0IHBvcHVwRm9ybXNBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1zX3R5cGVfYXZhdGFyJyk7XHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYXZhdGFyJyk7XHJcbmNvbnN0IHBvcHVwRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZGVsZXRlJyk7XHJcbmNvbnN0IGZvcm1TZWxlY3RvcnMgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm1zJyxcclxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZScsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcclxufVxyXG5cclxuZXhwb3J0IHtwb3B1cEVkaXQsIHBvcHVwQWRkLCBwb3B1cEZvcm1zRWRpdCwgcG9wdXBGb3Jtc0FkZCwgZm9ybVNlbGVjdG9ycywgcHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IsIHBvcHVwVmlldywgcHJvZmlsZUFkZEJ1dHRvbiwgcHJvZmlsZUVkaXRCdXR0b24sIGNhcmRzQ29udGFpbmVyLCBwb3B1cEZvcm1zQXZhdGFyLFxyXG5wb3B1cEF2YXRhciwgcHJvZmlsZUF2YXRhckJ1dHRvbiwgcHJvZmlsZUF2YXRhciwgcG9wdXBEZWxldGV9OyIsImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoaWQsIGltYWdlLCB0aXRsZSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBkZWxldGVDYXJkQ2xpY2ssIGxpa2VDYXJkQ2xpY2ssIGxpa2VzLCBpc093biwgaGFzQmVlbkxpa2VkKSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSBpbWFnZTtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9kZWxldGVDYXJkQ2xpY2sgPSBkZWxldGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgICAgICB0aGlzLl9pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMuX2lzT3duID0gaXNPd247XHJcbiAgICAgICAgdGhpcy5fbGlrZUNhcmRDbGljayA9IGxpa2VDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFzQmVlbkxpa2VkID0gaGFzQmVlbkxpa2VkXHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2NhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVUZW1wbGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19waG90bycpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzTnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbGlrZS1udW1iZXInKTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X190cmFzaC1idXR0b24nKTtcclxuICAgICAgICB0cmFzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gdGhpcy5faXNPd24gPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19waG90by10aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19saWtlLWJ1dHRvbicpO1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNCZWVuTGlrZWQpIHtcclxuICAgICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBoYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2xpa2UtYnV0dG9uJykuY2xhc3NMaXN0LnRvZ2dsZSgnZ2FsbGVyeV9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9saWtlQnV0dG9uQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUNhcmRDbGljayh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRMaWtlcyhsaWtlcykge1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhc2hTdWJtaXQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgX2hhbmRsZVBvcHVwVmlld09wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYW5kbGVQb3B1cERlbGV0ZU9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZENsaWNrKHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbGlrZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2xpa2VCdXR0b25DbGljay5iaW5kKHRoaXMpKTtcclxuICAgIFxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX3RyYXNoLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlUG9wdXBEZWxldGVPcGVuLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19waG90bycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVQb3B1cFZpZXdPcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQge0NhcmR9OyIsImNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7IFxyXG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShpdGVtLCBhcHBlbmQgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICBpZihhcHBlbmQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtTZWN0aW9ufTsiLCJjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b24nKVxyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG4gICAgICAgIHRoaXMuX3NldEVzY0xpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFc2NMaXN0ZW5lcigpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpICE9PSBudWxsICYmIGV2dC5jb2RlID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVPdmVybGF5Q2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC50YXJnZXQgIT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgXHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKGV2dCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZShldnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExvYWRpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlZmF1bHRCdXR0b24odGl0bGUpIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtQb3B1cH07IiwiaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdFByb21pc2UsIGZvcm1TdWJtaXRDYWxsYmFjaywgcG9wdXBWYWxpZGF0b3IsIHRpdGxlKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybVN1Ym1pdFByb21pc2UgPSBmb3JtU3VibWl0UHJvbWlzZTtcclxuICAgICAgICB0aGlzLl9mb3JtU3VibWl0Q2FsbGJhY2sgPSBmb3JtU3VibWl0Q2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBWYWxpZGF0b3IgPSBwb3B1cFZhbGlkYXRvcjtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlXHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20odGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB2YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZygpO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtU3VibWl0UHJvbWlzZSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdEJ1dHRvbih0aGlzLl90aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZm9ybVN1Ym1pdENhbGxiYWNrKHJlcyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZm9ybURhdGEsIHByZWZpeCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgaW5wdXROYW1lIGluIGZvcm1EYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihgLnBvcHVwX19pbnB1dFtuYW1lPSR7cHJlZml4fS0ke2lucHV0TmFtZX1dYCkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKGAucG9wdXBfX2lucHV0W25hbWU9JHtwcmVmaXh9LSR7aW5wdXROYW1lfV1gKS52YWx1ZSA9IGZvcm1EYXRhW2lucHV0TmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgICAgICB0aGlzLl9wb3B1cFZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcclxuICAgICAgICBcclxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBWYWxpZGF0b3IucmVzZXRFcnJvcigpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtQb3B1cFdpdGhGb3JtfTsiLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4odGl0bGUsIGltYWdlKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Bob3RvJykuc3JjID0gaW1hZ2U7IFxyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19waG90by1jYXB0aW9uJykudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgICBcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7UG9wdXBXaXRoSW1hZ2V9OyIsImNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gbmFtZVNlbGVjdG9yOyBcclxuICAgICAgICB0aGlzLl9qb2JTZWxlY3RvciA9IGpvYlNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gYXZhdGFyU2VsZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZVNlbGVjdG9yLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBqb2I6IHRoaXMuX2pvYlNlbGVjdG9yLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBpZDogdGhpcy5faWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8obmV3VXNlckluZm8pIHtcclxuICAgICAgICB0aGlzLl9uYW1lU2VsZWN0b3IudGV4dENvbnRlbnQgPSBuZXdVc2VySW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2pvYlNlbGVjdG9yLnRleHRDb250ZW50ID0gbmV3VXNlckluZm8uYWJvdXQ7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyU2VsZWN0b3Iuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke25ld1VzZXJJbmZvLmF2YXRhcn0pYFxyXG4gICAgICAgIHRoaXMuX2lkID0gbmV3VXNlckluZm8uX2lkXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7VXNlckluZm99OyIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIHBvcHVwLCB7Zm9ybVNlbGVjdG9yLCBpbnB1dFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciwgaW5hY3RpdmVCdXR0b25DbGFzcywgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzfSkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gaW5wdXRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGlucHV0RXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gZXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9IFxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgICAgICAgIH0gIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0RWxlbWVudHMpLnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZShjb25kaXRpb24pIHtcclxuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICAgICAgICBpZiAoY29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChidXR0b25FbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0RXJyb3IoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7IFxyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VzID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRFcnJvcnMgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0X3R5cGVfZXJyb3InKTtcclxuICAgICAgICAgICAgaWYgKGVycm9yTWVzc2FnZXMgPT09IG51bGwgJiYgaW5wdXRFcnJvcnMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgICAgICAgaW5wdXRFcnJvcnMuZm9yRWFjaChmdW5jdGlvbihpbnB1dEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVycm9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0Zvcm1WYWxpZGF0b3J9IiwiY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKCB7dXJsLCBoZWFkZXJzfSkge1xyXG4gICAgICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVJdGVtKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShpdGVtKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShpdGVtKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUl0ZW0oaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfSR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1dEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9JHtpdGVtLl9pZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7QXBpfSIsImltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9mb3JtU3VibWl0Q2FsbGJhY2sgPSBhY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtU3VibWl0Q2FsbGJhY2soKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGVmYXVsdEJ1dHRvbigpIHtcclxuICAgICAgICBzdXBlci5zZXREZWZhdWx0QnV0dG9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQtYnV0dG9uJylcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0JTQsCc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7UG9wdXBXaXRoU3VibWl0fSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQge3BvcHVwRWRpdCwgcG9wdXBBZGQsIHByb2ZpbGVOYW1lLCBwcm9maWxlSm9iLCBwb3B1cFZpZXcsIHByb2ZpbGVBZGRCdXR0b24sIHByb2ZpbGVFZGl0QnV0dG9uLCBjYXJkc0NvbnRhaW5lciwgcG9wdXBGb3Jtc0VkaXQsIHBvcHVwRm9ybXNBZGQsIFxyXG5mb3JtU2VsZWN0b3JzLCBwb3B1cEZvcm1zQXZhdGFyLCBwb3B1cEF2YXRhciwgcHJvZmlsZUF2YXRhckJ1dHRvbiwgcHJvZmlsZUF2YXRhciwgcG9wdXBEZWxldGV9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7Q2FyZH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQge1BvcHVwV2l0aEZvcm19IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7UG9wdXBXaXRoSW1hZ2V9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQge1VzZXJJbmZvfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQge0FwaX0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhTdWJtaXQgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdCc7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUpvYiwgcHJvZmlsZUF2YXRhcik7XHJcblxyXG5jb25zdCB1c2VyQXBpID0gbmV3IEFwaSh7XHJcbiAgICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE0L3VzZXJzL21lJywgXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzMyNjRkYTk0LTZhMGQtNDZiZC05ZWFmLWM4NzU4ZjczOTZmZCcsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJBdmF0YXJBcGkgPSBuZXcgQXBpKHtcclxuICAgIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTQvdXNlcnMvbWUvYXZhdGFyJywgXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzMyNjRkYTk0LTZhMGQtNDZiZC05ZWFmLWM4NzU4ZjczOTZmZCcsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGNhcmRzQXBpID0gbmV3IEFwaSh7XHJcbiAgICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE0L2NhcmRzJywgXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzMyNjRkYTk0LTZhMGQtNDZiZC05ZWFmLWM4NzU4ZjczOTZmZCcsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNhcmRBcGkgPSBuZXcgQXBpKHtcclxuICAgIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTQvY2FyZHMvJywgXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzMyNjRkYTk0LTZhMGQtNDZiZC05ZWFmLWM4NzU4ZjczOTZmZCcsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGxpa2VBcGkgPSBuZXcgQXBpKHtcclxuICAgIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTQvY2FyZHMvbGlrZXMvJywgXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzMyNjRkYTk0LTZhMGQtNDZiZC05ZWFmLWM4NzU4ZjczOTZmZCcsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuXHJcblByb21pc2UuYWxsKFtcclxuICAgIHVzZXJBcGkuZ2V0SXRlbXMoKSxcclxuICAgIGNhcmRzQXBpLmdldEl0ZW1zKClcclxuXSlcclxuICAgIC50aGVuKChbdXNlciwgY2FyZHNdKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKHtcclxuICAgICAgICAgICAgICAgIF9pZDogY2FyZC5faWQsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBjYXJkLmxpbmssXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaWtlczogY2FyZC5saWtlcyxcclxuICAgICAgICAgICAgICAgIGlzT3duOiBjYXJkLm93bmVyLl9pZCA9PT0gdXNlci5faWQsXHJcbiAgICAgICAgICAgICAgICBoYXNCZWVuTGlrZWQ6IGNhcmQubGlrZXMuc29tZSgodXNlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyLl9pZCA9PSB1c2VySW5mby5nZXRVc2VySW5mbygpLmlkIFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSwgdHJ1ZSlcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcblxyXG5jb25zdCBwb3B1cEVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cEZvcm1zRWRpdCwgcG9wdXBFZGl0LCBmb3JtU2VsZWN0b3JzKTtcclxuY29uc3QgcG9wdXBBZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cEZvcm1zQWRkLCBwb3B1cEFkZCwgZm9ybVNlbGVjdG9ycyk7XHJcbmNvbnN0IHBvcHVwQXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocG9wdXBGb3Jtc0F2YXRhciwgcG9wdXBBdmF0YXIsIGZvcm1TZWxlY3RvcnMpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoU3VibWl0RGVsZXRlID0gbmV3IFBvcHVwV2l0aFN1Ym1pdChwb3B1cERlbGV0ZSlcclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgaXRlbXM6IFtdLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgICAgICBpdGVtLl9pZCxcclxuICAgICAgICAgICAgaXRlbS5saW5rLCBcclxuICAgICAgICAgICAgaXRlbS5uYW1lLCBcclxuICAgICAgICAgICAgJy5jYXJkLXRlbXBsYXRlJywgXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwVmlldyk7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKGNhcmRUb0JlRGVsZXRlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9wdXBXaXRoU3VibWl0RGVsZXRlLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBXaXRoU3VibWl0RGVsZXRlLnNldExvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVDYXJkQXBpLmRlbGV0ZUl0ZW0oY2FyZFRvQmVEZWxldGVkLl9pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRUb0JlRGVsZXRlZC50cmFzaFN1Ym1pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBXaXRoU3VibWl0RGVsZXRlLnNldERlZmF1bHRCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhTdWJtaXREZWxldGUub3BlbigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoY2FyZFRvQmVMaWtlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhcmRUb0JlTGlrZWQuX2xpa2VzLnNvbWUoKHVzZXIpID0+IHsgcmV0dXJuIHVzZXIuX2lkID09IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuaWQgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaWtlQXBpLmRlbGV0ZUl0ZW0oY2FyZFRvQmVMaWtlZC5faWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRUb0JlTGlrZWQuc2V0TGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRUb0JlTGlrZWQuaGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpa2VBcGkucHV0SXRlbShjYXJkVG9CZUxpa2VkKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFRvQmVMaWtlZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFRvQmVMaWtlZC5oYW5kbGVMaWtlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXRlbS5saWtlcyxcclxuICAgICAgICAgICAgaXRlbS5pc093biwgXHJcbiAgICAgICAgICAgIGl0ZW0uaGFzQmVlbkxpa2VkKTtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVUZW1wbGF0ZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbn0sIGNhcmRzQ29udGFpbmVyKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEZvcm1FZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICBwb3B1cEVkaXQsXHJcbiAgICAoZm9ybUluZm8pID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtID0ge1xyXG4gICAgICAgICAgICBuYW1lOiBmb3JtSW5mb1sndXNlci1uYW1lJ10sIFxyXG4gICAgICAgICAgICBhYm91dDogZm9ybUluZm9bJ3VzZXItam9iJ10gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyQXBpLmNoYW5nZUl0ZW0oaXRlbSlcclxuICAgIH0sXHJcbiAgICAocmVzKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgIH0sIFxyXG4gICAgcG9wdXBFZGl0VmFsaWRhdG9yLCBcclxuICAgICfQodC+0YXRgNCw0L3QuNGC0YwnXHJcbik7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhGb3JtQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICBwb3B1cEFkZCxcclxuICAgIChmb3JtSW5mbykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGZvcm1JbmZvWydwbGFjZS1uYW1lJ10sIFxyXG4gICAgICAgICAgICBsaW5rOiBmb3JtSW5mb1sncGxhY2UtdXJsJ11cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhcmRzQXBpLmNyZWF0ZUl0ZW0oaXRlbSlcclxuICAgIH0sXHJcbiAgICAocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbSh7XHJcbiAgICAgICAgICAgIF9pZDogcmVzLl9pZCxcclxuICAgICAgICAgICAgbmFtZTogcmVzLm5hbWUsXHJcbiAgICAgICAgICAgIGxpbms6IHJlcy5saW5rLFxyXG4gICAgICAgICAgICBsaWtlczogcmVzLmxpa2VzLFxyXG4gICAgICAgICAgICBpc093bjogcmVzLm93bmVyLl9pZCA9PT0gdXNlckluZm8uZ2V0VXNlckluZm8oKS5pZCxcclxuICAgICAgICAgICAgaGFzQmVlbkxpa2VkOiByZXMubGlrZXMuc29tZSgodXNlcikgPT4geyBcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyLl9pZCA9PSB1c2VySW5mby5nZXRVc2VySW5mbygpLmlkIFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgcG9wdXBBZGRWYWxpZGF0b3IsIFxyXG4gICAgJ9Ch0L7Qt9C00LDRgtGMJ1xyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoRm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgcG9wdXBBdmF0YXIsXHJcbiAgICAoZm9ybUluZm8pID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtID0ge1xyXG4gICAgICAgICAgICBhdmF0YXI6IGZvcm1JbmZvWyd1c2VyLWF2YXRhciddXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyQXZhdGFyQXBpLmNoYW5nZUl0ZW0oaXRlbSlcclxuICAgIH0sXHJcbiAgICAocmVzKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgIH0sXHJcbiAgICBwb3B1cEF2YXRhclZhbGlkYXRvcixcclxuICAgICfQodC+0YXRgNCw0L3QuNGC0YwnXHJcbik7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgXHJcbiAgICBwb3B1cFdpdGhGb3JtRWRpdC5vcGVuKHVzZXJJbmZvLmdldFVzZXJJbmZvKCksICd1c2VyJyk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHBvcHVwV2l0aEZvcm1BZGQub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBwb3B1cFdpdGhGb3JtQXZhdGFyLm9wZW4oKTtcclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==